<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文件预览下载</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
    <style>
        .imgList {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .img {
            /* width: 400px; */
            height: 300px;
            padding: 10px;
        }

        .hide {
            display: none;
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
        }

        .select-corol {
            background-color: aqua;
            border: 1px solid aqua;
            border-radius: 3px;
        }

        .content {
            padding: 50px;
        }
    </style>
</head>

<body>
    <div>
        <div style="display: flex;">
            <div class="tab">图片</div>
            <div class="tab">文档</div>
        </div>
        <div class="content">
            <div class="imgList"></div>
            <div class="fileList"></div>
        </div>
    </div>
</body>

<script type="module">
    import dataList from './data.js'
    const fileUrl = "/item/file"
    const imagesUrl = `${fileUrl}/images`
    const libsUrl = `${fileUrl}/libs`
    const dataUrl = `${fileUrl}/data.json`

    function init() {
        initImg();
        initFile();
        $(".fileList").addClass("hide")
        $(".tab").eq(0).addClass("select-corol")
        $(".tab").click(function () {
            $(".content>div").each(function (index) {
                $(this).removeClass("hide");
            });
            $(".tab").each(function (index) {
                $(this).removeClass("select-corol");
            });
            if ($(this).text() == "图片") {
                $(".fileList").addClass("hide")
                $(".tab").eq(0).addClass("select-corol")
            } else if ($(this).text() == "文档") {
                $(".imgList").addClass("hide")
                $(".tab").eq(1).addClass("select-corol")
            }
        })
    }
    init()
    function initImg() {
        let img = "";
        dataList.images.forEach(element => {
            img += `<div class="img"><a href="${imagesUrl}/${element.name}" target="_blank"><img src="${imagesUrl}/${element.name}" alt="" style="height: 250px;"></a><div style="word-wrap: break-word;word-break: break-all;overflow: hidden;">${element.name}</div></div>`
        });
        $(".imgList").html(img)
    }
    function initFile() {
        let file = "";
        dataList.libs.forEach(element => {
            if (element.children && element.children.length > 0) {
                element.children.forEach(item=>{
                    file += `<a href="${libsUrl}/${element.name}/${item.name}" style="text-decoration:none; padding: 20px;"><span>${element.name}/${item.name}</span></a>`
                })
            } else {
                file += `<a href="${libsUrl}/${element.name}" style="text-decoration:none; padding: 20px;"><span>${element.name}</span></a>`
            }
        });
        $(".fileList").html(file)
    }
</script>
</html>