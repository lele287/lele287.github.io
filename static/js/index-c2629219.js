import"./modulepreload-polyfill-3cfb730f.js";/**!
 * @author zhangxinxu(.com)
 * @description 基于SVG feDisplacementMap滤镜实现的任意元素点击水波效果
 * @link http://www.zhangxinxu.com/wordpress/?p=6626
 * @license MIT 保留这段注释和说明
 */var k=function(){var n=document.createElement("canvas");if(n.getContext){var r=n.getContext("2d"),i=512,s=512,o=250,v=100,a=o-v;n.width=i,n.height=s;var h=function(p,l,u,d){for(var g=2*Math.PI/d.length,f=0,c=null,m=null,b=null,e=0;e<d.length;e++){m=d[e],b=d[(e+1)%d.length];var y=p+Math.cos(f)*u,w=p+Math.cos(f+g)*u,M=l+Math.sin(f)*u,S=l+Math.sin(f+g)*u;r.beginPath(),c=r.createLinearGradient(y,M,w,S),c.addColorStop(0,m),c.addColorStop(1,b),r.strokeStyle=c,r.arc(p,l,u,f,f+g),r.lineWidth=o-v,r.stroke(),r.closePath(),f+=g}};r.beginPath(),r.arc(i/2,s/2,o,0,Math.PI*2),r.fillStyle="#7f7f7f",r.fill(),h(i/2,s/2,v+a/2,["rgb(255,0,0)","rgb(0, 255, 0)","rgb(255,0,0)","rgb(0, 255, 0)"]);var t=r.createRadialGradient(i/2,s/2,v,i/2,s/2,o);return t.addColorStop(0,"rgba(127,127,127,1)"),t.addColorStop(17/a,"rgba(115,115,115,.8)"),t.addColorStop(25/a,"rgba(115,115,115,0.1)"),t.addColorStop(28/a,"rgba(115,115,115,0.1)"),t.addColorStop(37/a,"rgba(115,104,104,.8)"),t.addColorStop(43/a,"rgba(115,104,104,1)"),t.addColorStop(44/a,"rgba(127,127,127,1)"),t.addColorStop(50/a,"rgba(127,127,127,.6)"),t.addColorStop(54/a,"rgba(127,127,127,0)"),t.addColorStop(61/a,"rgba(0,0,0,0)"),t.addColorStop(67/a,"rgba(0,0,0,1)"),t.addColorStop(78/a,"rgba(0,0,0,1)"),t.addColorStop(88/a,"rgba(0,0,0,0)"),t.addColorStop(100/a,"rgba(0,0,0,0)"),t.addColorStop(108/a,"rgba(0,0,0,1)"),t.addColorStop(117/a,"rgba(0,0,0,1)"),t.addColorStop(136/a,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,0)"),r.beginPath(),r.arc(i/2,s/2,o,0,Math.PI*2),r.fillStyle=t,r.fill(),n.toDataURL()}}();window.Tween||(window.Tween={});Tween.Linear||(Tween.Linear=function(n,r,i,s){return i*n/s+r});Math.animation||(Math.animation=function(n,r,i,s,o){var v=function(e){return typeof e=="function"},a=function(e){return typeof e=="number"},h=function(e){return typeof e=="string"},t=function(e){if(a(e))return e;if(h(e)){if(/\d+m?s$/.test(e))return/ms/.test(e)?1*e.replace("ms",""):1e3*e.replace("s","");if(/^\d+$/.test(e))return+e}return-1},p=window.Tween,l={duration:300,easing:"Linear",callback:function(){}},u=function(e){v(e)?l.callback=e:t(e)!=-1?l.duration=t(e):h(e)&&(l.easing=e)};u(i),u(s),u(o),window.requestAnimationFrame||(requestAnimationFrame=function(e){return setTimeout(e,17)});var d=0,g=Math.ceil(l.duration/17),f=null;l.easing=l.easing.slice(0,1).toUpperCase()+l.easing.slice(1);var c=l.easing.split("."),m;c.length==1?m=p[c[0]]:c.length==2&&(m=p[c[0]]&&p[c[0]][c[1]]);var b=function(){var e=m(d,n,r-n,g);d++,d<=g?(l.callback(e),f=requestAnimationFrame(b)):l.callback(r,!0)};return b(),function(){return f}});var C=null,A=function(n){if(!(!n||!history.pushState)){var r=navigator.userAgent;if(/Safari|iPhone/i.test(r)&&/chrome/i.test(r)==!1){window.console&&console.info("Safari support but bug, so avoid!");return}if(typeof n=="string"){[].slice.call(document.querySelectorAll(n)).forEach(function(t){A(t)});return}var i="filterRipple",s=document.getElementById(i);s||document.body.insertAdjacentHTML("afterbegin",'<svg style="position:absolute;height:0;clip:rect(0 0 0 0);"><defs><filter id="'+i+'"><feImage xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+k+'" x="0" y="0" width="512" height="512" result="ripple"></feImage><feDisplacementMap xChannelSelector="G" yChannelSelector="R" color-interpolation-filters="sRGB" in="SourceGraphic" in2="ripple" scale="0"></feDisplacementMap><feComposite operator="in" in2="ripple"></feComposite><feComposite in2="SourceGraphic"></feComposite></filter></defs></svg>');var o=document.querySelector("#"+i+" feImage"),v=document.querySelector("#"+i+" feDisplacementMap"),a=null,h=null;n.addEventListener("click",function(t){a&&cancelAnimationFrame(a()),h&&cancelAnimationFrame(h()),C&&C!=this&&(C.style.filter=""),n.style.filter="url(#"+i+")";var p=n.offsetWidth,l=n.offsetHeight,u=t.clientX,d=t.clientY,g=n.getBoundingClientRect(),f=g.left,c=g.top,m=u-f,b=d-c;o.setAttribute("x",m),o.setAttribute("y",b),o.setAttribute("width",0),o.setAttribute("height",0);var e=Math.min(512,Math.max(p,l)*2),y=30*e/512,w=2e3*e/512,M=2100*e/512;h=Math.animation(y,0,w,function(S){v.setAttribute("scale",S)}),a=Math.animation(0,e,M,function(S,x){o.setAttribute("x",m-S/2),o.setAttribute("y",b-S/2),o.setAttribute("width",S),o.setAttribute("height",S),x&&(n.style.filter="")}),C=this})}};function I(){let n=document.getElementById("img");n.src="https://api.btstu.cn/sjbz/api.php?lx=dongman&format=images&random="+Math.random()}I();A(document.getElementById("button"));A(document.getElementById("img"));document.getElementById("button").onclick=I;
